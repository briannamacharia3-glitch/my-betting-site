<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pro Bet Game</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
}

.header{
  background:#000;
  padding:15px;
  font-size:22px;
  font-weight:bold;
}

.container{
  padding:15px;
}

.card{
  background:#1e1e1e;
  padding:15px;
  margin:12px auto;
  border-radius:12px;
  max-width:420px;
  animation:fadeIn 0.5s ease;
}

button{
  padding:8px 15px;
  margin:5px;
  border:none;
  border-radius:6px;
  background:#00c853;
  color:white;
  font-size:15px;
  cursor:pointer;
}

button:hover{
  background:#00e676;
}

input{
  padding:8px;
  margin:5px;
  border-radius:6px;
  border:none;
  width:120px;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(20px);}
  to{opacity:1; transform:translateY(0);}
}
</style>
</head>
<body>

<div class="header">Pro Bet Game</div>

<div class="container">

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h3>Login</h3>
  <input id="username" placeholder="Enter username">
  <br>
  <button onclick="login()">Enter</button>
</div>

<!-- PROFILE -->
<div id="profileSection" style="display:none;">
  <div class="card">
    <h2 id="welcome"></h2>
    <h3>Coins: <span id="coins">0</span></h3>
  </div>

  <div id="matches"></div>

  <div class="card">
    <h3>Bet History</h3>
    <ul id="history"></ul>
  </div>

  <div class="card">
    <h3>Leaderboard</h3>
    <ul id="leaderboard"></ul>
  </div>
</div>

</div>

<script>
let user;

const matches=[
  {id:1, team1:"Arsenal", team2:"Chelsea", odds1:1.8, odds2:2.1},
  {id:2, team1:"Man United", team2:"Liverpool", odds1:2.0, odds2:1.9},
  {id:3, team1:"Barcelona", team2:"Real Madrid", odds1:1.7, odds2:2.2},
  {id:4, team1:"Bayern", team2:"Dortmund", odds1:1.6, odds2:2.4}
];

function login(){
  user=document.getElementById("username").value;
  if(!user) return;

  if(!localStorage.getItem(user)){
    localStorage.setItem(user,100);
    localStorage.setItem(user+"_history",JSON.stringify([]));
  }

  document.getElementById("loginBox").style.display="none";
  document.getElementById("profileSection").style.display="block";

  document.getElementById("welcome").innerText="Welcome "+user;

  updateCoins();
  showMatches();
  updateLeaderboard();
  updateHistory();
}

function updateCoins(){
  let coins=localStorage.getItem(user);
  document.getElementById("coins").innerText=coins;
}

function showMatches(){
  let container=document.getElementById("matches");
  container.innerHTML="";

  matches.forEach(match=>{
    let div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <h3>${match.team1} vs ${match.team2}</h3>
      Bet amount: <input id="bet${match.id}" type="number" value="10">
      <br>
      <button onclick="bet(${match.id},'${match.team1}',${match.odds1})">
        ${match.team1} (x${match.odds1})
      </button>
      <button onclick="bet(${match.id},'${match.team2}',${match.odds2})">
        ${match.team2} (x${match.odds2})
      </button>
      <p id="result${match.id}"></p>
    `;
    container.appendChild(div);
  });
}

function bet(id,team,odds){
  let coins=parseInt(localStorage.getItem(user));
  let amount=parseInt(document.getElementById("bet"+id).value);

  if(amount>coins){
    document.getElementById("result"+id).innerText="Not enough coins";
    return;
  }

  let match=matches.find(m=>m.id===id);
  let winner=Math.random()<0.5?match.team1:match.team2;
  let resultText;

  if(team===winner){
    let win=Math.floor(amount*odds);
    coins+=win;
    resultText="Won "+win+" coins on "+team;
  }else{
    coins-=amount;
    resultText="Lost "+amount+" coins on "+team;
  }

  localStorage.setItem(user,coins);
  document.getElementById("result"+id).innerText="Winner: "+winner;

  saveHistory(resultText);
  updateCoins();
  updateLeaderboard();
  updateHistory();
}

function saveHistory(text){
  let history=JSON.parse(localStorage.getItem(user+"_history"));
  history.unshift(text);
  if(history.length>5) history.pop();
  localStorage.setItem(user+"_history",JSON.stringify(history));
}

function updateHistory(){
  let history=JSON.parse(localStorage.getItem(user+"_history"));
  let list=document.getElementById("history");
  list.innerHTML="";
  history.forEach(item=>{
    let li=document.createElement("li");
    li.innerText=item;
    list.appendChild(li);
  });
}

function updateLeaderboard(){
  let list=document.getElementById("leaderboard");
  list.innerHTML="";

  let users=[];
  for(let i=0;i<localStorage.length;i++){
    let key=localStorage.key(i);
    let value=localStorage.getItem(key);
    if(!isNaN(value)){
      users.push({name:key,coins:parseInt(value)});
    }
  }

  users.sort((a,b)=>b.coins-a.coins);

  users.forEach(u=>{
    let li=document.createElement("li");
    li.innerText=u.name+": "+u.coins+" coins";
    list.appendChild(li);
  });
}
</script>

</body>
</html>
